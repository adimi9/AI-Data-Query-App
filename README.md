# AI-Powered Data Query App ğŸ“Š

## Overview
This app allows users to upload CSV/Excel files and interact with them through AI-powered queries and visualizations. The app supports multiple datasets, lets you explore the data by viewing top N rows, and provides insights through questions and answers powered by PandasAI with OpenAI. Visualizations are handled using Microsoft LIDA.

---

## Main Features ğŸ‰

### 1. **Multiple Dataset Upload ğŸ“¥**
Users can upload multiple CSV or Excel files. The app uses Pandas to load and process the data.

### 2. **View Top N Rows ğŸ‘€**
Select which dataset to view and define how many top rows to display. The number of rows is adjustable via a Streamlit slider, and Pandas handles the data display.

### 3. **Ask Questions & Get Answers ğŸ’¬**
Once the data is uploaded, users can ask questions, which are answered using PandasAI powered by OpenAI. For visualizations, Microsoft LIDA is used to generate interactive charts. Users can easily query any dataset via a dropdown menu.

### 4. **Guardrails for Safe & Relevant Queries ğŸš§**
The app includes built-in guardrails to ensure safe and relevant interactions. These include:
- **Jailbreak Guardrail**: Prevents any attempts to bypass the systemâ€™s rules.
- **Malicious Input Detection**: Blocks potentially harmful content like SQL injections and XSS.
- **Irrelevant Input Check**: Ensures queries are related to the uploaded datasets.

These guardrails are implemented using Python, regular expressions, and PandasAI for query analysis.

### 5. **History of Prompts ğŸ”„**
Users can view and reuse previous queries. The app tracks this history using Streamlit's session state, allowing for easy reference and re-use of past prompts.

---

## Tech Stack ğŸ’»
- **Pandas**: Used for reading and processing uploaded datasets.
- **Streamlit**: Powers the app interface, including file uploads, data display, dropdowns, and session state for history management.
- **PandasAI (OpenAI)**: Handles AI-powered question answering.
- **Microsoft LIDA**: Generates interactive visualizations.
- **Python**: Handles the backend logic, security features, and input filtering.

---

## Safety Considerations ğŸ›¡ï¸

### 1. **File Size Limit (10MB)**
To ensure smooth performance and prevent system overload, the app enforces a file size limit of 10MB for any dataset uploaded. This measure ensures that the system can process the data efficiently without any performance degradation, particularly when dealing with large datasets that may be resource-intensive. Files exceeding the 10MB limit are automatically rejected, ensuring the app remains responsive and stable.

### 2. **Sandbox Environment with PandaAI ğŸ”’**
The app uses PandaAIâ€™s sandbox environment to run Python code generated by LLMs for user queries. This ensures that the code execution is isolated from the main system, preventing any security risks. The sandbox operates offline, has strict resource limits, and keeps the file system secure from any potential harmful actions.

### 3. **Guardrails Implemented ğŸš§**
To further enhance the appâ€™s security and ensure safe user interactions, three key guardrails have been implemented:

#### a. **Jailbreak Prevention ğŸš«**
The app incorporates a jailbreak detection mechanism that prevents users from attempting to bypass the systemâ€™s safety protocols. 

**How it works**:
- The app looks for specific phrases like â€œignore all previous instructionsâ€ or â€œdo not follow any of my instructions.â€
- When a match is detected, the request is rejected with a message informing the user of the security violation.

#### b. **Malicious Input Detection ğŸ›‘**
To protect against potentially harmful inputs such as SQL injection, XSS attacks, or other forms of malicious code, the app implements an input vaLIDAtion system. 

**How it works**:
- The app checks for typical malicious patterns, such as:
  - **SQL Injection**: Detects attempts to manipulate database queries using keywords like "drop table", "select *", or "insert into".
  - **XSS and Script Injection**: Identifies attempts to execute harmful code, such as JavaScript embedded in the input (e.g., `<script>`, `eval()`).
- If any of these patterns are detected, the app immediately blocks the input and informs the user of the potential threat.

#### c. **Irrelevant Input Detection âš ï¸**
To maintain the focus and relevance of user queries, the app checks if the userâ€™s input pertains to the uploaded dataset. 

**How it works**:
- The app uses a combination of predefined rules and OpenAIâ€™s GPT models to analyze whether the userâ€™s query is related to the uploaded data.
- If the question is unrelated, the app alerts the user that the query doesnâ€™t match the dataset, helping users stay on track and avoid confusion.
